(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"240i":function(e,t,n){"use strict";var a=n("hDBU"),r=n("mXGw"),l=n.n(r),i=n("8Jek"),c=n.n(i),o=n("L2VZ");t.a=function(e){var t=e.children,n=e.className,r=l.a.useRef(null),i=l.a.useState(!1),u=Object(a.default)(i,2),s=u[0],m=u[1];return function(e,t){l.a.useEffect(function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}},[e,t])}(r,function(){return m(!1)}),l.a.createElement("div",{className:c()("relative z-10 ",n),ref:r},l.a.createElement("button",{type:"button",className:c()({"btn-fab":!0,"btn--grey":!s,"btn--grey-active":s}),onClick:function(){return m(!s)}},l.a.createElement(o.f,{className:"w-4 h-4"})),s&&l.a.createElement("div",{className:"absolute pin-r py-4 w-48 rounded-sm bg-white shadow-lg"},t))}},"2xrT":function(e,t,n){e.exports=n("md7T")},"3Hfq":function(e,t,n){var a=n("TaGV"),r=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},"6B+P":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("hDBU"),r=n("mXGw"),l=n.n(r),i=n("vPok"),c=l.a.createContext(null);function o(e){var t=l.a.useState(null),n=Object(a.default)(t,2),r=n[0],o=n[1];return l.a.useEffect(function(){return i.a.onProfile(function(e){return o(e)})},[]),l.a.createElement(c.Provider,{value:r,children:e.children})}t.b=c},"6JBb":function(e,t,n){var a=n("/6KZ"),r=n("SvME")(!1);a(a.S,"Object",{values:function(e){return r(e)}})},"79+t":function(e,t,n){var a=n("/6KZ"),r=n("bvQF");a(a.G+a.F*(parseInt!=r),{parseInt:r})},"8cf0":function(e,t,n){var a=n("/6KZ"),r=n("Xj5l"),l=n("/Vl9"),i=n("M5cM"),c="["+i+"]",o=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),s=function(e,t,n){var r={},c=l(function(){return!!i[e]()||"​"!="​"[e]()}),o=r[e]=c?t(m):i[e];n&&(r[n]=o),a(a.P+a.F*c,"String",r)},m=s.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(o,"")),2&t&&(e=e.replace(u,"")),e};e.exports=s},Cm0q:function(e,t,n){"use strict";n.r(t);var a=n("mXGw"),r=n.n(a),l=n("8Jek"),i=n.n(l),c=n("pAnI");t.default=function(e){var t=e.id,n=e.value,a=e.onChange,l=e.disabled,i=void 0!==l&&l,u=e.allVotes;return r.a.createElement("fieldset",null,r.a.createElement("legend",{className:c.a},"Your vote"),r.a.createElement("div",{className:"flex leading-normal"},r.a.createElement("div",{className:"flex mr-3 bg-grey-0 rounded-sm shadow-md"},r.a.createElement(o,{key:0,name:t,value:"Abstain",totalVotes:u[0],label:"?",tooltip:'Vote a "?" if you want to abstain from voting, or feel the ticket needs more conversation.',checked:0===n,onChange:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return a(0)}),className:"px-3 sm:px-4 md:px-6",disabled:i})),r.a.createElement("div",{className:"flex-auto flex bg-grey-0 rounded-sm shadow-md"},[1,2,3,5,8,13,21,34].map(function(e){return r.a.createElement(o,{key:e,checked:e===n,className:"flex-1",label:e.toString(),name:t,onChange:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return a(e)}),totalVotes:u[e],value:e.toString(),disabled:i})}))))};var o=function(e){var t=e.checked,n=e.className,a=e.label,l=e.name,c=e.onChange,o=e.tooltip,u=e.totalVotes,s=e.value,m=e.disabled;return r.a.createElement("label",{title:o,className:i()(n,"relative py-2 text-center rounded-sm",{"bg-violet-5 text-white shadow ":t,"cursor-pointer bg-white hover:bg-violet-1":!t&&!m})},r.a.createElement("input",{className:"hidden",type:"radio",name:l,value:s,onChange:c,checked:t,disabled:m}),a,u&&r.a.createElement("span",{title:"This option received ".concat(u," votes"),className:"absolute w-full pin-b pin-l break-words px-1",style:{lineHeight:"5px",height:"15px"}},new Array(u).fill(0).map(function(){return"."})))}},FdmI:function(e,t,n){e.exports=n("n7m4")},"JYC+":function(e,t,n){e.exports=n("3Hfq")},M5cM:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},M6oQ:function(e,t,n){"use strict";var a=n("mXGw"),r=n.n(a),l=n("X7Yp"),i=n("8Jek"),c=n.n(i);t.a=function(e){var t=e.userList,n=e.getDotColor,a=e.imgSize,i=void 0===a?"small":a,o=e.showPlaceholder,u=e.onClick;if(0===t.length&&!o)return null;var s=c()({"w-6 h-6 mr-3":"small"===i,"w-8 h-8 mr-3":"medium"===i}),m=0===t.length&&!0===o;return r.a.createElement("ul",{className:"list-reset flex flex-wrap"},t.map(function(e){return r.a.createElement("li",{key:e.id,className:"mb-3"},r.a.createElement(l.a,{alt:e.displayName,src:e.photoURL,title:e.displayName,className:c()(s,{"cursor-pointer":void 0!==u}),dotColor:n&&n(e.id),onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return u&&u(e.id)})}))}),m&&r.a.createElement("li",{key:"placeholder",className:c()(s,"rounded-full border bg-grey-2")}))}},O4b9:function(e,t,n){"use strict";n.r(t);var a=n("FdmI"),r=n.n(a),l=n("azxR"),i=n("2xrT"),c=n.n(i),o=n("Rbzu"),u=n("hDBU"),s=n("mXGw"),m=n.n(s),f=n("8Jek"),d=n.n(f),v=n("JYC+"),b=n.n(v);function p(e){var t=e.filter(function(e){return e>0}).filter(function(e){return isFinite(e)}),n=t.reduce(function(e,t){return e+t},0)/t.length;if(isNaN(n)||0===n)return 0;for(var a,r,l=0,i=1;r=i,!(l<=(a=n)&&a<=r);){var c=i+l;if(l=i,i=c,c>1e3)throw new Error("You are spinning on calculating nextFib: votes: ".concat(b()(e)))}return n-l<i-n?l:i}var h=n("M6oQ"),g=n("L2VZ"),E=n("Cm0q"),N=n("240i"),k=n("vPok"),x=n("clzX"),w=n("6B+P"),y=n("zprC");n.d(t,"Title",function(){return C});var C=function(e){var t=e.title,n=e.link;if(n)return m.a.createElement("a",{href:n,target:"_blank"},t);var a=t.match(/^(http[s]?:\/\/|www\.)+[^\s]+[\w]/);if(null!==a){var r=a[0],l=t.replace(a[0],"");return m.a.createElement(m.a.Fragment,null,m.a.createElement("a",{href:r,target:"_blank"},r),l)}return m.a.createElement(m.a.Fragment,null,t)},S=function(e){var t=e.ticket,n=e.initialValue,a=e.onSubmit,l=m.a.useState(n),i=Object(u.default)(l,2),c=i[0],o=i[1],s=m.a.useState(!1),f=Object(u.default)(s,2),v=f[0],b=f[1];return m.a.createElement("form",{className:"",method:"POST",onSubmit:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){e.preventDefault(),""!==c&&(b(!0),a(c).then(function(){b(!1)}))})},m.a.createElement("div",{className:"inline-flex items-center"},m.a.createElement("label",null,"Committed value:"),m.a.createElement("input",{type:"text",required:!0,disabled:v,value:c,onChange:function(e){var t=r()(e.target.value,10);o(isNaN(t)?"":t)},className:d()("mx-2 w-10 text-center","py-2 placeholder:text-grey-8","border-b border-gray-3","outline-none focus:border-teal-7")}),m.a.createElement("button",{disabled:v,className:d()("bg-teal-7 hover:bg-teal-8","text-teal-1 hover:text-teal-2 font-bold font-header leading-none","px-3 py-2 rounded-sm shadow-md","flex items-center"),type:"submit"},t.committedValue===c&&m.a.createElement(g.c,{className:"w-4 h-4 mr-2"}),v&&m.a.createElement(g.e,{className:"animate-spin w-4 h-4 mr-2"}),"Push to Jira")))};t.default=function(e){var t,n=e.mid,a=e.ticket,r=e.currentVote,i=e.disableVoting,s=e.onFocusClick,f=e.voterList,v=m.a.useState(!1),b=Object(u.default)(v,2),O=b[0],j=b[1],T=m.a.useContext(w.b);return O?m.a.createElement("article",{className:"my-3"},m.a.createElement(x.default,{ticket:{title:a.title,link:a.link,description:a.description,source:a.source},onSubmit:function(e){return k.a.updateTicket(n,Object(o.a)({id:a.id},e)).then(function(){j(!1)})},formButtons:m.a.createElement("div",{className:"flex"},m.a.createElement(y.a,{type:"submit",className:"mr-3"},m.a.createElement(g.g,{className:"w-5 h-5 mr-2"}),"Update Ticket"),m.a.createElement("button",{type:"button",onClick:function(){return j(!1)}},"Cancel"))})):m.a.createElement("article",null,m.a.createElement("header",{className:"flex items-baseline mb-2"},m.a.createElement("h1",{className:"text-lg leading-tight flex-1"},m.a.createElement(C,{title:a.title,link:a.link})),m.a.createElement("button",{title:"Draw focus to this ticket for all users",type:"button",onClick:s,className:"btn-fab btn--grey ml-3"},m.a.createElement(g.i,{className:"w-4 h-4"})),m.a.createElement(N.a,null,m.a.createElement("button",{type:"button",className:d()("flex w-full text-left","px-6 py-2","hover:bg-grey-1"),onClick:function(){return j(!0)}},m.a.createElement(g.d,{className:"w-4 h-4 mr-6"}),m.a.createElement("span",{className:"flex-1"},"Edit")),m.a.createElement("hr",{className:"border-b my-2"}),m.a.createElement("button",{type:"button",className:d()("flex w-full text-left","px-6 py-2","hover:bg-grey-1"),onClick:function(){return k.a.deleteTicket(n,a.id)}},m.a.createElement(g.j,{className:"w-4 h-4 mr-6"}),m.a.createElement("span",{className:"flex-1"},"Delete")))),a.description&&m.a.createElement("div",{className:"mb-3"},a.description),a.isRevealed&&m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"mb-2"},"Average: ",p(c()(a.votes))),"jira"===a.source&&null!==T&&T.hasCreds&&m.a.createElement("div",{className:"mb-2"},m.a.createElement(S,{ticket:a,initialValue:void 0!==a.committedValue?a.committedValue:p(c()(a.votes)),onSubmit:function(e){return k.a.pushPointsToJira(Object(l.a)({},a.id,e)).then(function(){k.a.updateTicket(n,{id:a.id,committedValue:e})})}}))),m.a.createElement("div",{className:"mb-2"},!a.isRevealed&&m.a.createElement("button",{type:"button",className:"text-violet-5 underline",onClick:function(){return k.a.revealTicket(n,a.id)}},"Reveal votes")),m.a.createElement("form",{className:"mb-2"},m.a.createElement(E.default,{id:a.id,value:r,onChange:function(e){return k.a.voteOnTicket(n,a.id,e)},allVotes:a.isRevealed?(t=a.votes,c()(t).reduce(function(e,t){return Object(o.a)({},e,Object(l.a)({},t,(e[t]||0)+1))},{})):{},disabled:i})),m.a.createElement("div",{className:"mx-1"},m.a.createElement(h.a,{imgSize:"small",userList:f,getDotColor:function(e){return void 0===a.votes[e]?"bg-red-1":""}})))}},SvME:function(e,t,n){var a=n("/Lgp"),r=n("T/1i"),l=n("kBaS").f;e.exports=function(e){return function(t){for(var n,i=r(t),c=a(i),o=c.length,u=0,s=[];o>u;)l.call(i,n=c[u++])&&s.push(e?[n,i[n]]:i[n]);return s}}},X7Yp:function(e,t,n){"use strict";var a=n("z3IF"),r=n("2Fjn"),l=n("mXGw"),i=n.n(l),c=n("8Jek"),o=n.n(c);t.a=function(e){var t=e.src,n=e.alt,l=e.className,c=e.dotColor,u=Object(r.a)(e,["src","alt","className","dotColor"]);return i.a.createElement("div",{className:o()("relative",l)},c&&i.a.createElement("span",{className:o()("absolute z-10 w-3 h-3 -mr-1 -mb-1 pin-b pin-r","rounded-full pointer-events-none",c)}),i.a.createElement("span",{className:"absolute h-full rounded-full shadow-inner w-full pointer-events-none"}),i.a.createElement("img",Object(a.a)({src:t,alt:n},u,{className:"rounded-full overflow-hidden"})))}},bvQF:function(e,t,n){var a=n("41F1").parseInt,r=n("8cf0").trim,l=n("M5cM"),i=/^[-+]?0[xX]/;e.exports=8!==a(l+"08")||22!==a(l+"0x16")?function(e,t){var n=r(String(e),3);return a(n,t>>>0||(i.test(n)?16:10))}:a},clzX:function(e,t,n){"use strict";n.r(t);var a=n("azxR"),r=n("Rbzu"),l=n("hDBU"),i=n("mXGw"),c=n.n(i),o=n("pG0O");t.default=function(e){var t=e.formButtons,n=e.onSubmit,i=e.ticket,u={title:"",link:"",description:"",source:"form"},s=i||u,m=c.a.useState(s),f=Object(l.default)(m,2),d=f[0],v=f[1],b=function(e){e.persist(),v(function(t){return Object(r.a)({},t,Object(a.a)({},e.target.name,e.target.value))})};return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==d.title.trim()&&n(d,{resetForm:function(){return v(u)}})},autoComplete:"off"},c.a.createElement("div",{className:"mb-6"},c.a.createElement(o.a,{id:"ticket__title",name:"title",label:"Title",value:d.title,onChange:b,required:!0}),c.a.createElement(o.a,{id:"ticket__link",name:"link",label:"Link",value:d.link,onChange:b,type:"url"}),c.a.createElement(o.a,{id:"ticket__description",name:"description",label:"Description",value:d.description,onChange:b})),t)}},md7T:function(e,t,n){n("6JBb"),e.exports=n("TaGV").Object.values},n7m4:function(e,t,n){n("79+t"),e.exports=n("TaGV").parseInt},"ytk/":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/meeting/Ticket",function(){var e=n("O4b9");return{page:e.default||e}}])},zprC:function(e,t,n){"use strict";var a=n("z3IF"),r=n("2Fjn"),l=n("mXGw"),i=n.n(l),c=n("8Jek"),o=n.n(c);t.a=function(e){var t=e.className,n=Object(r.a)(e,["className"]);return i.a.createElement("button",Object(a.a)({className:o()("btn btn--violet",t),type:"button"},n))}}},[["ytk/",1,0]]]);