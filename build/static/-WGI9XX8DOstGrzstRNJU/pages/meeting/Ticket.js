(window.webpackJsonp=window.webpackJsonp||[]).push([["7da7"],{"240i":function(e,t,a){"use strict";var n=a("hDBU"),r=a("mXGw"),l=a.n(r),i=a("8Jek"),c=a.n(i),o=a("L2VZ");t.a=function(e){var t=e.children,a=e.className,r=l.a.useRef(null),i=l.a.useState(!1),u=Object(n.default)(i,2),s=u[0],m=u[1];return function(e,t){l.a.useEffect(function(){var a=function(a){e.current&&!e.current.contains(a.target)&&t(a)};return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),function(){document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}},[e,t])}(r,function(){return m(!1)}),l.a.createElement("div",{className:c()("relative z-10 ",a),ref:r},l.a.createElement("button",{type:"button",className:c()({"btn-fab":!0,"btn--grey":!s,"btn--grey-active":s}),onClick:function(){return m(!s)}},l.a.createElement(o.f,{className:"w-4 h-4"})),s&&l.a.createElement("div",{className:"absolute pin-r py-4 w-48 rounded-sm bg-white shadow-lg"},t))}},"2xrT":function(e,t,a){e.exports=a("md7T")},"3Hfq":function(e,t,a){var n=a("TaGV"),r=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},"6B+P":function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("hDBU"),r=a("mXGw"),l=a.n(r),i=a("vPok"),c=l.a.createContext(null);function o(e){var t=l.a.useState(null),a=Object(n.default)(t,2),r=a[0],o=a[1];return l.a.useEffect(function(){return i.a.onProfile(function(e){return o(e)})},[]),l.a.createElement(c.Provider,{value:r,children:e.children})}t.b=c},"6JBb":function(e,t,a){var n=a("/6KZ"),r=a("SvME")(!1);n(n.S,"Object",{values:function(e){return r(e)}})},"79+t":function(e,t,a){var n=a("/6KZ"),r=a("bvQF");n(n.G+n.F*(parseInt!=r),{parseInt:r})},"8cf0":function(e,t,a){var n=a("/6KZ"),r=a("Xj5l"),l=a("/Vl9"),i=a("M5cM"),c="["+i+"]",o=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),s=function(e,t,a){var r={},c=l(function(){return!!i[e]()||"​"!="​"[e]()}),o=r[e]=c?t(m):i[e];a&&(r[a]=o),n(n.P+n.F*c,"String",r)},m=s.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(o,"")),2&t&&(e=e.replace(u,"")),e};e.exports=s},Cm0q:function(e,t,a){"use strict";a.r(t);var n=a("mXGw"),r=a.n(n),l=a("8Jek"),i=a.n(l),c=a("pAnI");t.default=function(e){var t=e.id,a=e.value,n=e.onChange,l=e.disabled,i=void 0!==l&&l,u=e.allVotes;return r.a.createElement("fieldset",null,r.a.createElement("legend",{className:c.a},"Your vote"),r.a.createElement("div",{className:"flex leading-normal"},r.a.createElement("div",{className:"flex mr-3 bg-grey-0 rounded-sm shadow-md"},r.a.createElement(o,{key:0,name:t,value:"Abstain",totalVotes:u[0],label:"?",tooltip:'Vote a "?" if you want to abstain from voting, or feel the ticket needs more conversation.',checked:0===a,onChange:function(){return n(0)},className:"px-3 sm:px-4 md:px-6",disabled:i})),r.a.createElement("div",{className:"flex-auto flex bg-grey-0 rounded-sm shadow-md"},[1,2,3,5,8,13,21,34].map(function(e){return r.a.createElement(o,{key:e,checked:e===a,className:"flex-1",label:e.toString(),name:t,onChange:function(){return n(e)},totalVotes:u[e],value:e.toString(),disabled:i})}))))};var o=function(e){var t=e.checked,a=e.className,n=e.label,l=e.name,c=e.onChange,o=e.tooltip,u=e.totalVotes,s=e.value,m=e.disabled;return r.a.createElement("label",{title:o,className:i()(a,"relative py-2 text-center rounded-sm",{"bg-violet-5 text-white shadow ":t,"cursor-pointer bg-white hover:bg-violet-1":!t&&!m})},r.a.createElement("input",{className:"hidden",type:"radio",name:l,value:s,onChange:c,checked:t,disabled:m}),n,u&&r.a.createElement("span",{title:"This option received ".concat(u," votes"),className:"absolute w-full pin-b pin-l break-words px-1",style:{lineHeight:"5px",height:"15px"}},new Array(u).fill(0).map(function(){return"."})))}},FdmI:function(e,t,a){e.exports=a("n7m4")},"JYC+":function(e,t,a){e.exports=a("3Hfq")},M5cM:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},M6oQ:function(e,t,a){"use strict";var n=a("mXGw"),r=a.n(n),l=a("X7Yp"),i=a("8Jek"),c=a.n(i);t.a=function(e){var t=e.userList,a=e.getDotColor,n=e.imgSize,i=void 0===n?"small":n,o=e.showPlaceholder,u=e.onClick;if(0===t.length&&!o)return null;var s=c()({"w-6 h-6 mr-3":"small"===i,"w-8 h-8 mr-3":"medium"===i}),m=0===t.length&&!0===o;return r.a.createElement("ul",{className:"list-reset flex flex-wrap"},t.map(function(e){return r.a.createElement("li",{key:e.id,className:"mb-3"},r.a.createElement(l.a,{alt:e.displayName,src:e.photoURL,title:e.displayName,className:c()(s,{"cursor-pointer":void 0!==u}),dotColor:a&&a(e.id),onClick:function(){return u&&u(e.id)}}))}),m&&r.a.createElement("li",{key:"placeholder",className:c()(s,"rounded-full border bg-grey-2")}))}},O4b9:function(e,t,a){"use strict";a.r(t);var n=a("FdmI"),r=a.n(n),l=a("azxR"),i=a("2xrT"),c=a.n(i),o=a("Rbzu"),u=a("hDBU"),s=a("mXGw"),m=a.n(s),d=a("8Jek"),f=a.n(d),v=a("JYC+"),b=a.n(v);function p(e){var t=e.filter(function(e){return e>0}).filter(function(e){return isFinite(e)}),a=t.reduce(function(e,t){return e+t},0)/t.length;if(isNaN(a)||0===a)return 0;for(var n,r,l=0,i=1;r=i,!(l<=(n=a)&&n<=r);){var c=i+l;if(l=i,i=c,c>1e3)throw new Error("You are spinning on calculating nextFib: votes: ".concat(b()(e)))}return a-l<i-a?l:i}var h=a("M6oQ"),E=a("L2VZ"),g=a("Cm0q"),N=a("240i"),k=a("vPok"),x=a("clzX"),w=a("6B+P"),y=a("zprC");a.d(t,"Title",function(){return C});var C=function(e){var t=e.title,a=e.link;if(a)return m.a.createElement("a",{href:a,target:"_blank"},t);var n=t.match(/^(http[s]?:\/\/|www\.)+[^\s]+[\w]/);if(null!==n){var r=n[0],l=t.replace(n[0],"");return m.a.createElement(m.a.Fragment,null,m.a.createElement("a",{href:r,target:"_blank"},r),l)}return m.a.createElement(m.a.Fragment,null,t)},S=function(e){var t=e.ticket,a=e.initialValue,n=e.onSubmit,l=m.a.useState(a),i=Object(u.default)(l,2),c=i[0],o=i[1],s=m.a.useState(!1),d=Object(u.default)(s,2),v=d[0],b=d[1];return m.a.createElement("form",{className:"",method:"POST",onSubmit:function(e){e.preventDefault(),""!==c&&(b(!0),n(c).then(function(){b(!1)}))}},m.a.createElement("div",{className:"inline-flex items-center"},m.a.createElement("label",null,"Committed value:"),m.a.createElement("input",{type:"text",required:!0,disabled:v,value:c,onChange:function(e){var t=r()(e.target.value,10);o(isNaN(t)?"":t)},className:f()("mx-2 w-10 text-center","py-2 placeholder:text-grey-8","border-b border-gray-3","outline-none focus:border-teal-7")}),m.a.createElement("button",{disabled:v,className:f()("bg-teal-7 hover:bg-teal-8","text-teal-1 hover:text-teal-2 font-bold font-header leading-none","px-3 py-2 rounded-sm shadow-md","flex items-center"),type:"submit"},t.committedValue===c&&m.a.createElement(E.c,{className:"w-4 h-4 mr-2"}),v&&m.a.createElement(E.e,{className:"animate-spin w-4 h-4 mr-2"}),"Push to Jira")))};t.default=function(e){var t,a=e.mid,n=e.ticket,r=e.currentVote,i=e.disableVoting,s=e.onFocusClick,d=e.voterList,v=m.a.useState(!1),b=Object(u.default)(v,2),O=b[0],j=b[1],T=m.a.useContext(w.b);return O?m.a.createElement("article",{className:"my-3"},m.a.createElement(x.default,{ticket:{title:n.title,link:n.link,description:n.description,source:n.source},onSubmit:function(e){return k.a.updateTicket(a,Object(o.a)({id:n.id},e)).then(function(){j(!1)})},formButtons:m.a.createElement("div",{className:"flex"},m.a.createElement(y.a,{type:"submit",className:"mr-3"},m.a.createElement(E.g,{className:"w-5 h-5 mr-2"}),"Update Ticket"),m.a.createElement("button",{type:"button",onClick:function(){return j(!1)}},"Cancel"))})):m.a.createElement("article",null,m.a.createElement("header",{className:"flex items-baseline mb-2"},m.a.createElement("h1",{className:"text-lg leading-tight flex-1"},m.a.createElement(C,{title:n.title,link:n.link})),m.a.createElement("button",{title:"Draw focus to this ticket for all users",type:"button",onClick:s,className:"btn-fab btn--grey ml-3"},m.a.createElement(E.i,{className:"w-4 h-4"})),m.a.createElement(N.a,null,m.a.createElement("button",{type:"button",className:f()("flex w-full text-left","px-6 py-2","hover:bg-grey-1"),onClick:function(){return j(!0)}},m.a.createElement(E.d,{className:"w-4 h-4 mr-6"}),m.a.createElement("span",{className:"flex-1"},"Edit")),m.a.createElement("hr",{className:"border-b my-2"}),m.a.createElement("button",{type:"button",className:f()("flex w-full text-left","px-6 py-2","hover:bg-grey-1"),onClick:function(){return k.a.deleteTicket(a,n.id)}},m.a.createElement(E.j,{className:"w-4 h-4 mr-6"}),m.a.createElement("span",{className:"flex-1"},"Delete")))),n.description&&m.a.createElement("div",{className:"mb-3"},n.description),n.isRevealed&&m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"mb-2"},"Average: ",p(c()(n.votes))),"jira"===n.source&&null!==T&&T.hasCreds&&m.a.createElement("div",{className:"mb-2"},m.a.createElement(S,{ticket:n,initialValue:void 0!==n.committedValue?n.committedValue:p(c()(n.votes)),onSubmit:function(e){return k.a.pushPointsToJira(Object(l.a)({},n.id,e)).then(function(){k.a.updateTicket(a,{id:n.id,committedValue:e})})}}))),m.a.createElement("div",{className:"mb-2"},!n.isRevealed&&m.a.createElement("button",{type:"button",className:"text-violet-5 underline",onClick:function(){return k.a.revealTicket(a,n.id)}},"Reveal votes")),m.a.createElement("form",{className:"mb-2"},m.a.createElement(g.default,{id:n.id,value:r,onChange:function(e){return k.a.voteOnTicket(a,n.id,e)},allVotes:n.isRevealed?(t=n.votes,c()(t).reduce(function(e,t){return Object(o.a)({},e,Object(l.a)({},t,(e[t]||0)+1))},{})):{},disabled:i})),m.a.createElement("div",{className:"mx-1"},m.a.createElement(h.a,{imgSize:"small",userList:d,getDotColor:function(e){return void 0===n.votes[e]?"bg-red-1":""}})))}},SvME:function(e,t,a){var n=a("/Lgp"),r=a("T/1i"),l=a("kBaS").f;e.exports=function(e){return function(t){for(var a,i=r(t),c=n(i),o=c.length,u=0,s=[];o>u;)l.call(i,a=c[u++])&&s.push(e?[a,i[a]]:i[a]);return s}}},X7Yp:function(e,t,a){"use strict";var n=a("z3IF"),r=a("2Fjn"),l=a("mXGw"),i=a.n(l),c=a("8Jek"),o=a.n(c);t.a=function(e){var t=e.src,a=e.alt,l=e.className,c=e.dotColor,u=Object(r.a)(e,["src","alt","className","dotColor"]);return i.a.createElement("div",{className:o()("relative",l)},c&&i.a.createElement("span",{className:o()("absolute z-10 w-3 h-3 -mr-1 -mb-1 pin-b pin-r","rounded-full pointer-events-none",c)}),i.a.createElement("span",{className:"absolute h-full rounded-full shadow-inner w-full pointer-events-none"}),i.a.createElement("img",Object(n.a)({src:t,alt:a},u,{className:"rounded-full overflow-hidden"})))}},bvQF:function(e,t,a){var n=a("41F1").parseInt,r=a("8cf0").trim,l=a("M5cM"),i=/^[-+]?0[xX]/;e.exports=8!==n(l+"08")||22!==n(l+"0x16")?function(e,t){var a=r(String(e),3);return n(a,t>>>0||(i.test(a)?16:10))}:n},clzX:function(e,t,a){"use strict";a.r(t);var n=a("azxR"),r=a("Rbzu"),l=a("hDBU"),i=a("mXGw"),c=a.n(i),o=a("pG0O");t.default=function(e){var t=e.formButtons,a=e.onSubmit,i=e.ticket,u={title:"",link:"",description:"",source:"form"},s=i||u,m=c.a.useState(s),d=Object(l.default)(m,2),f=d[0],v=d[1],b=function(e){e.persist(),v(function(t){return Object(r.a)({},t,Object(n.a)({},e.target.name,e.target.value))})};return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==f.title.trim()&&a(f,{resetForm:function(){return v(u)}})},autoComplete:"off"},c.a.createElement("div",{className:"mb-6"},c.a.createElement(o.a,{id:"ticket__title",name:"title",label:"Title",value:f.title,onChange:b,required:!0}),c.a.createElement(o.a,{id:"ticket__link",name:"link",label:"Link",value:f.link,onChange:b,type:"url"}),c.a.createElement(o.a,{id:"ticket__description",name:"description",label:"Description",value:f.description,onChange:b})),t)}},md7T:function(e,t,a){a("6JBb"),e.exports=a("TaGV").Object.values},n7m4:function(e,t,a){a("79+t"),e.exports=a("TaGV").parseInt},"ytk/":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/meeting/Ticket",function(){var e=a("O4b9");return{page:e.default||e}}])},zprC:function(e,t,a){"use strict";var n=a("z3IF"),r=a("2Fjn"),l=a("mXGw"),i=a.n(l),c=a("8Jek"),o=a.n(c);t.a=function(e){var t=e.className,a=Object(r.a)(e,["className"]);return i.a.createElement("button",Object(n.a)({className:o()("btn btn--violet",t),type:"button"},a))}}},[["ytk/","5d41","9da1"]]]);